-----
### TCP
-----
1. 1970년대 초 패킷 교환 네트워크는 많은 네트워크 중 하나였던 ARPAnet과 함께 급격히 증가하기 시작했고, 이러한 각 네트워크는 개별적 프로토콜을 가짐
   - 빈튼 서프(Vinton Cerf)와 로버트 칸(Robert Kahn)은 네트워크 상호 연결 중요성을 인식해 TCP/IP 네트워크 프로토콜 개발
   - 이 프로토콜을 단일 개체로 보고 시작했으나, 후에 별도로 동작하는 TCP와 IP라는 두 부분으로 분리

2. TCP 연결
   - 애플리케이션 프로세스가 데이터를 다른 프로세스로 보내기 전, 두 프로세스가 서로 핸드쉐이크를 먼저 해야하므로 '연결지향형(Connection-Oriented)
   - 즉, 데이터 전송을 보장하는 파라미터들을 각자 설정하기 위해 어떤 사전 세그먼트들을 보내야 하며, TCP 연결 설정의 일부로서 연결 양단은 TCP 연결과 연관된 많은 TCP 상태 변수를 초기화
   - '연결'은 두 통신 종단 시스템의 TCP에 존재하는 상태를 공유하는 논리적인 것으로, TCP 프로토콜은 오직 종단 시스템에서만 동작하고 중간의 네트워크 요소(라우터와 링크 계층 스위치)에서는 동작하지 않으므로, 중간 네트워크 요소들은 TCP 연결 상태를 유지하지 않음
   - 또한, 전이중 서비스(Full-Duplex Service) 제공
     + 만약, 호스트 A의 프로세스와 호스트 B의 프로세스 사이에 TCP 연결이 있다면, 애플리케이션 계층 데이터는 B에서 A로 흐르는 동시에 A에서 B로 흐를 수 있음
     + 항상 단일 송신자와 단일 수신자 사이의 점대점(Point-to-Point) (단일 송신 동작으로 한 송신자가 여러 수신자에게 데이터를 전송하는 멀티캐스팅은 불가능)

   - 한 호스트에서 동작하는 프로세스가 다른 호스트의 프로세스와 연결을 초기화하기를 원한다고 가정
     + 연결을 초기화하는 프로세스는 클라이언트 프로세스, 다른 프로세스는 서버 프로세스
     + 클라이언트 애플리케이션 프로세스는 서버의 프로세스와 연결 설정을 원한다고 TCP 클라이언트에게 먼저 알림
     + 클라이언트가 먼저 특별한 TCP 세그먼트를 보내면, 서버는 두 번쨰 특별한 TCP 세그먼트로 응답한 뒤, 마지막으로 클라이언트가 세 번째 특별한 세그먼트로 다시 응답
     + 처음 2개의 세그먼트에는 페이로드, 즉 애플리케이션 계층 데이터가 없으며, 세 번째 세그먼트는 페이로드를 포함할 수 있음
     + 이처럼, 두 호스트 사이 3개의 세그먼트가 보내지므로, 이 연결 설정 절차는 흔히 세 방향 핸드쉐이크(3-Way Handshake)라고 부름

3. TCP 송신 버퍼와 수신 버퍼
<div align="center">
<img src="https://github.com/user-attachments/assets/e71b4de2-5a6f-4b1f-88eb-8f1bc3a659c6">
</div>

   - TCP 연결이 설정되면, 두 애플리케이션 프로세스는 서로 데이터를 보낼 수 있으며, 클라이언트 프로세스에서 서버 프로세스로의 데이터 송신 고려
   - 클라이언트 프로세스는 소켓을 통해 데이터 스트림을 전달
   - 데이터가 소켓을 통해 전달되면, 데이터는 클라이언트에서 동작하고 있는 TCP에 맡겨지며, TCP는 초기 세 방향 핸드쉐이크 동안 준비된 버퍼 중 하나인 연결의 송신 버퍼로 데이터를 보냄
     + 송신 버퍼는 데이터 묶음을 만들어서 보내기도 함
     + TCP 명세서에서 TCP는 자신이 편한대로 세그먼트의 데이터를 전송해야 한다고 하므로, TCP가 언제 버퍼된 데이터를 전송해야 되는지 기술되지 않음
     + 최대 세그먼트 크기(Maximum Segement Size, MSS) : 세그먼트를 모아 담을 수 있는 최대 데이터의 양
       * 일반적으로 로컬 송신 호스트에 의해 전송될 수 있는 가장 큰 링크 계층 프레임의 길이(최대 전송 단위(Maximum Transmission Unit, MTU))에 의해 일단 결정
       * TCP 세그먼트(IP 데이터 그램 안 캡슐화)와 TCP/IP 헤더 길이(통상 40 바이트)가 단일 계층 프레임에 딱 맞도록 정해짐
       * 이더넷과 PPP 링크 계층 프로토콜은 모두 1,500 바이트의 MTU를 가지므로, 일반적인 MSS의 값은 1460 바이트
       * 출발지에서 목적지까지 모든 링크 상 전송될 수 있는 가장 큰 링크 계층 프레임인 경로 MTU를 찾고, 이 경로 MTU 값에 근거한 MSS 설정을 위한 방식이 제안
       * 💡 MSS가 헤더를 포함한 TCP 세그먼트의 최대 크기가 아닌, 세그먼트에 있는 애플리케이션 계층 데이터에 대한 최대 크기라는 점

4. TCP는 TCP 헤더와 클라이언트 데이터를 하나로 묶어 TCP 세그먼트(TCP Segment)를 구현
   - 세그먼트는 네트워크 계층에 전달되며, 네트워크 계층 IP 데이터그램 안 각 캡슐화되어, 네트워크로 송신
   - TCP가 상대에게서 세그먼트를 수신했을 때, 세그먼트의 데이터는 TCP 연결의 수신 버퍼에 위치
   - 애플리케이션은 이 버퍼로부터 데이터 스트림을 읽음
   - 연결의 양 끝은 각 자신의 송신 버퍼와 수신 버퍼를 가짐

5. 버퍼와 변수는 호스트 간 네트워크 요소(라우터, 스위치, 리피터) 연결에 영향을 미치지 않음
