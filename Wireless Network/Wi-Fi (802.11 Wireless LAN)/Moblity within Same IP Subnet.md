-----
### 동일한 IP 서브넷 내에서의 이동성
-----
1. 무선 랜의 물리적 영역을 증가시키기 위해 동일한 IP 서브넷에 여러 개의 BSS를 설치하기도 함
   - 따라서, 무선 스테이션이 기존 TCP 세션을 유지한 채로 어떻게 한 BSS에서 다른 BSS로 매끄럽게 이동할 수 있는가에 대한 이동성 문제가 발생
   - BSS들이 같은 서브넷에 속한 경우에 쉽게 이동성을 지원할 수 있음
   - 스테이션이 서브넷 사이를 이동할 때는 좀 더 복잡한 이동성 관리 프로토콜이 필요
  
2. 동일한 서브넷에 있는 BSS 간 이동성과 관련된 예
<div align="center">
<img src="https://github.com/user-attachments/assets/e96d1865-1455-4e96-8ea1-0eedd8f9426f">
</div>

  - 서로 연결된 BSS들인 BSS1과 BSS2가 있으며, 호스트 H1은 BSS1에서 BSS2로 이동
  - 두 BSS를 연결하는 장치는 라우터가 아니며, 두 BSS에 있는 AP를 포함한 모든 기지국은 동일한 IP 서브넷에 속함
  - 따라서 H1이 BSS1에서 BSS2로 이동할 때 H1 IP 주소는 동일하게 유지되며, H1에 의해 현재 진행 중인 모든 TCP 연결도 유지될 수 있음
  - 연결 장치가 라우터인 경우, H1은 자신의 IP 주소를 새로 진입한 서브넷에 맞게 변경할 필요가 있는데, 이 경우 H1은 현재 진행 중인 TCP 연결을 잠시 중단하거나 종료해야 할 수 있음
    + 이를 위해서 이동 IP(Mobile IP)와 같은 네트워크 계층의 이동성 프로토콜이 사용되어야 함

3. H1이 BSS1에서 BSS2로 이동하면 일어나는 상황
   - H1이 AP1에서 떠나면서 AP1로부터 신호가 약해지는 것을 감지하고 더 강한 신호를 찾기 시작
   - H1은 AP2로부터 비컨 프레임을 수신하면, 자신의 IP 주소와 진행 중인 TCP 세션을 유지한 채 AP1과의 결합을 끊고 AP2의 새로운 결합을 만듬

4. 이러한 동작은 호스트와 AP 관점에서 본 핸드오프(Hand-Off) 상황
   - 스위치에서는 호스트가 하나의 AP로부터 다른 AP로 옮겨가는 것을 스위치의 자가 학습 기능을 통해 확인
   - 자가 기능은 간혹 일어나는 이동을 지원하지만, TCP 연결을 유지한 채로 BSS들 사이의 이동을 빈번하게 하는 사용자는 지원하지 못함
   - 스위치 포워딩 테이블에는 H1의 MAC 주소와 H1에 도달할 수 있는 스위치의 출력 인터페이스 엔트리가 있으며, 처음에는 H1이 BSS1에 있으면 H1으로의 데이터그램은 AP1를 통해 전달
   - 그러나 일단 H1이 BSS2와 결합하게 되면, H1으로의 프레임은 AP2로 전달되어야 함
   - 해결 방안 : 결합을 새로 설정한 다음, AP2로 하여금 출발지 주소가 H1인 이더넷 프레임을 스위치로 브로드캐스트하게 만드는 것으로, 이 프레임을 수신한 스위치는 포워딩 테이블을 갱신함으로 AP2를 통해 H1에 도달 가능
   - 802.11f 표준화 그룹에서는 이 문제 해결을 위한 AP 간 프로토콜을 개발하고 있음

