-----
### 802.11 WLAN 구조
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/44c199b6-a89a-4f4b-a75b-8388237a9525">
</div>

1. 802.11의 가장 근본적인 구성 단위 : BSS(Basic Service Set)
   - BSS는 하나 이상의 무선 단말기와 하나의 기지국, 즉 AP(Access Point)로 구성
   - 두 BSS에 존재하는 각 AP가 인터넷 장비(스위치, 라우터 등)에 연결
   - 전형적인 홈 네트워크에서는 BSS를 인터넷으로 연결하는 AP와 라우터가 각각 필요하며, 이들은 하나의 제품으로 대개 구현

2. 이더넷 장치처럼, 802.11 무선 기지국은 6바이트의 MAC 주소를 가지며, MAC 주소는 스테이션의 어댑터(802.11 네트워크 인터페이스 카드) 펌웨어에 저장
   - 각 AP도 자신의 무선 인터페이스에 대한 MAC 주소를 가짐
   - 이더넷에서처럼 MAC 주소는 IEEE에 의해 관리되며, 이론적으로는 전 세계에서 유일성을 가짐

3. AP를 가진 무선 랜을 인프라스트럭쳐 무선 랜(Infrastructure Wireless LAN)이라고 함
   - 인프라스트럭쳐, 즉 네트워크 인프라스트럭쳐는 AP, 그리고 AP를 인터넷 라우터와 연결해주는 유선 이더넷 구조를 통칭

   - IEEE 802.11 스테이션들이 애드훅 네트워크를 형성하기 위해 서로를 그룹으로 연결하는 상황
<div align="center">
<img src="https://github.com/user-attachments/assets/0bd69a8a-80a3-4309-8728-e5cb2ba13feb">
</div>

   - 애드훅 네트워크는 중앙 제어나 외부 네트워크로의 연결 인프라가 없는 경우를 말함
   - 이 경우, 네트워크는 근접한 이동 장치들 사이의 연결을 통해 즉흥적으로 형성되는데, 그 이유는 이미 존재하는 다른 네트워크 인프라스트럭처에 기댈 수 없으므로, 가까이 있는 장치들이 서로 찾아서 통신해야 하기 때문임
   - 애드훅 네트워크는 AP가 없는 환경에서 만나 데이터를 교환할 때 형성

-----
### 채널과 결합
-----
1. 802.11에서 개별 무선 단말기는 네트워크 계층 데이터를 송신 또는 수신하기 전 하나의 AP와 결합되어 있어야 함
2. 네트워크 관리자가 AP를 설치할 때 AP에게 하나 또는 두 단어로 된 SSID(Servie Set Identifier)를 할당
3. 그리고 관리자는 AP에게 채널 숫자를 할당해야 함
   - 802.11은 2.4 ~ 2.4835 GHz 주파수 범위에서 동작함
4. 802.11은 80여 MHz 주파수 대역에서 11개의 일부가 겹치는 채널들을 정의
   - 서로 다른 2개의 채널은 4개 채널 이상의 간격으로 분리되어 있어야만 겹치지 않음
   - 특히 채널 1, 6, 11은 유일하게 겹치지 않는 3개의 채널
   - 즉, 관리자는 3개의 802.11 AP를 같은 장소에 설치한 후, 이들에게 각각 채널 1, 6, 11을 할당하고 그 3개의 AP를 하나의 스위치로 연결
5. 와이파이 정글(WiFi Jungle)
   - 무선 스테이션이 둘 이상의 AP로부터 충분히 강한 신호를 받을 수 있는 모든 지역
   - 이러한 AP들은 각기 다른 IP 서브넷에 있을 수 있고, 독립적으로 채널을 할당했을 수 있음
   - 정글에 5개의 AP가 있다고 가정 : 무선 스테이션이 인터넷에 접속하기 위해서는 정확하게 하나의 서브넷에 들어가야 하므로 단 하나의 AP와 결합해야 됨 (결합 : 무선 스테이션이 AP와 가상 회선을 만드는 것을 뜻함)
   - 결합된 AP만이 데이터 프레임(데이터를 포함한 프레임, 데이터그램)을 무선 스테이션에게 전송할 수 있으며, 무선 스테이션은 결합된 AP를 통해서만 인터넷으로 데이터 프레임 전송 가능
6. 802.11 표준은 AP가 주기적으로 비컨 프레임(Beacon Frame)을 전송할 것을 요구
   - 비컨 프레임에는 AP와 SSID와 MAC 주소가 포함
   - AP들이 비컨 프레임을 보내는 것을 알고 있는 무선 스테이션은 주변 AP로부터 비컨 프렝미을 찾기 위해 11개의 채널을 살펴봄
   - 비컨 프레임으로부터 사용 가능한 AP들의 정보를 얻은 무선 스테이션은 결합을 맺을 AP를 하나 선택
   - 802.11 표준은 사용 가능한 AP 중 어떤 것을 선택할 것인지를 정하는 알고리즘은 정의하지 않으며, 무선 스테티션의 펌웨어 또는 소프트웨어 설계자에 의해 결정
   - 일반적으로 무선 스테이션은 비컨 시그널의 세기가 가장 강한 AP를 선택
   - 신호의 세기는 중요하지만, 무선 스테이션의 수신 성능을 결정하는 유일한 특성은 아니며, 특히, 강한 신호를 가진 AP를 선택했으나 다른 스테이션들과 중복 선택이 되어 대역폭을 공유해야 하는 경우가 발생할 수 있음
   - 반면에, 단독으로 사용 가능한 다른 AP가 있음에도 약한 신호의 세기로 인해 선택되지 못하는 경우가 있음

7. 비컨 프레임의 수신을 통해 채널을 찾는 과정 : 수동적 스캐닝(Passive Scanning)
   - 무선 호스트는 능동적 스캐닝(Active Scanning) 과정을 수행할 수도 있는데, (b)와 같이 무선 스테이션이 영역 안에 있는 AP들에게 탐사용 프로브(Probe) 프레임을 방송하는 방식
   - 영역 내 있는 AP들이 프로브 요청에 대해 프로브 응답 메세지를 보내오면, 무선 스테이션은 응답한 AP들 중 하나를 선택할 수 있음
   - AP를 선택한 후, 무선 스테이션은 선택된 AP에게 결합 요청 메세지를 전송하며 AP는 결합 수락 메세지를 반송
     + 두 번째 요청 / 수락 핸드쉐이킹 통신은 능동적 스캐닝을 사용하는 경우에 필요
     + 스테이션의 첫 번쨰 프로브 요청에 응답한 AP는 여러 개의 응답한 AP 중 어떤 것이 선택될지 모르므로, 마치 DHCP 클라이언트가 여러 개의 DHCP 서버 중 하나를 선택하는 방식과 비슷
     + AP와의 결합 단계가 끝난 후, 무선 스테이션은 AP가 속한 서브넷에 가입하고 싶어할 것인데, 무선 스테이션은 AP의 서브넷 IP 주소를 얻기 위해 결합된 AP를 통해 서브넷으로 DHCP 발견 메세지를 전송
     + 서브넷 주소를 얻으면 인터넷의 나머지 노드는 이 무선 스테이션을 선택된 AP의 서브넷 내부의 IP 주소를 지닌 한 호스트로 여기게 됨

8. 무선 스테이션이 특정 AP와 결합하기 위해서는 해당 AP에게 자신을 인증해야 할 때도 있는데, 802.11 무선 랜에서는 다수의 인증 및 접근 방법을 제공
   - 그 중 한 방법은 스테이션의 MAC 주소를 기반으로 무선 네트워크로의 접근을 허용하는 것
   - 다른 방법은 사용자의 이름과 암호를 입력하게 하는 것
   - 두 방법 모두 AP는 인증 서버와 통신하며, 무선 종단 스테이션과 인증서버 사이 RADIUS 같은 프로토콜을 사용해 정보 중계
   - 인증 서버와 AP를 분리함으로 하나의 인증 서버가 여러 AP들을 지원할 수 있고, 인증 및 접근 결정을 단일 서버에서 중앙 집중식으로 처리할 수 있으며, AP의 비용과 복잡성을 낮출 수 ㅣㅆ음
 
