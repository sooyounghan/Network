-----
### IPsec과 가상 사설 네트워크(VPN)
-----
1. 여러 지역에 흩어져 있는 기관들은 그들의 호스트와 서버가 기밀성을 유지하며 안전하게 서로에게 데이터를 전송할 수 있도록 종종 자신만의 IP 네트워크를 갖기를 원하는데, 이 목적을 달성하기 위해 기관들은 공공 인터넷과 완벽하게 분리된 라우터, 링크, DNS 시스템을 포함하는 물리적으로 독립된 네트워크를 실제 설치할 수 있음
2. 이렇게 분리되어 특정 기관 전용으로 설치된 네트워크를 사설 네트워크라고 하며, 사설 네트워크는 매우 큰 비용을 유발함 (자신만의 물리적 네트워크 인프라스트럭처 구매 / 설치 / 유지)
3. 사설 네트워크를 설치하고 유지하는 대신 오늘날 많은 네트워크는 기존 공공 인터넷상에 VPN을 구축
<div align="center">
<img src="https://github.com/user-attachments/assets/be509afa-f571-47ec-bce0-e39b654462c5">
</div>

   - VPN을 이용하여 기관의 사무실 간 트래픽은 물리적으로 독립된 네트워크가 아닌 공공 인터네을 통해 전송
   - 그러나 기밀성을 제공하기 위해 이 트래픽들은 공공 인터넷으로 들어가기 전 암호화가 됨
   - 이 VPN에서 본부 내 두 컴퓨터가 서로에게 IP 데이터그램을 보낼 때나 지점 내 두 컴퓨터가 서로 통신을 원할 때는 기존 평범한 IPv4를 사용 (즉, IPsec 서비스가 제공되지 않음)
   - 그러나 두 호스트가 공공 인터넷을 통과하는 경로를 이용해 통신할 때는 트래픽이 인터넷에 들어가기 전 암호화

4. 예시) 본부의 한 호스트가 호텔에 있는 영업직원에게 IP 데이터그램을 보내려고 할 때
   - 본부의 게이트웨이 라우터는 이 평범한 IPv4 데이터그램을 IPsec 데이터그램으로 바꾼 후 인터넷으로 전송
   - 이 IPsec 데이터그램은 사실 전형적인 IPv4 헤더를 가지고 있어서 공공 인터넷의 라우터들은 이를 평범한 IPv4 데이터그램인 것 처럼 처리
   - 그러나 IPsec 데이터그램 페이로드는 IPsec 헤더를 포함하고, 이는 IPsec를 처리를 위해 사용
   - 더불어, IPsec 데이터그램 페이로드는 암호화되어, IPsec 데이터그램이 영업직원의 랩톱에 도착하면 랩톱의 OS는 페이로드를 복호화하고(데이터 무결성 검사 등의 다른 보안 서비스까지 제공) 해독된 페이로드를 상위 계층 프로토콜(예) TCP, UDP)에 전달
  
