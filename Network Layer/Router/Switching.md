-----
### 스위칭
-----
1. 스위치 구조는 패킷이 입력 포트에서 출력 포트로 실제로 스위칭(즉, 포워딩)되는 구조를 통과하므로 라우터의 핵심
2. 세 가지 스위칭 기술
<div align="center">
<img src="https://github.com/user-attachments/assets/b7d23fbe-8cf5-40e6-b165-a397f834522d">
</div>

  - 메모리를 통한 교환
    + 가장 단순한 초기의 라우터는 CPU(라우팅 프로세서)를 직접 제어해서 입력 포트와 출력 포트 사이에서 패킷을 스위칭하는 전통적 방식
    + 입력 포트와 출력 포트는 전통적인 운영체제에서 전통적인 I/O 장치처럼 작동
    + 패킷이 도착하면 입력 포트는 라우팅 프로세서에서 인터럽트를 보내 패킷을 프로세서 메모리로 복사
    + 그런 다음, 라우팅 프로세서는 헤더에서 목적지 주소를 추출하고 포워딩 테이블에서 적절한 출력 포트를 찾은 다음 패킷을 출력 포트의 버퍼에 복사
    + 메모리 대역폭이 초당 최대 B인 패킷을 메모리에 쓰거나 읽을 수 있는 경우 전체 전달 처리량(패킷이 입력 포트에서 출력 포트로 전송되는 총 속도)은 B / 2보다 작아야 함
    + 또한, 목적지 포트가 다른 경우라고 공유 시스템 버스를 통해 한 번에 하나의 메모리 읽기 / 쓰기 작업을 수행할 수 있으므로 두 패킷을 동시에 전달할 수 없음
    + 최근 일부 라우터는 메모리를 통해 스위칭하지만, 주요 차이점은 목적지 주소를 검색하고 해당 메모리 위치에 패킷을 저장하는 것이 입력 라인 카드에서 수행되는 것

  - 버스를 통한 교환
    + 입력 포트는 라우팅 프로세스의 개입 없이 공유 버스를 통해 직접 출력 포트로 패킷 전송
    + 일반적으로 미리 준비된 입력 포트 스위치 내부 레이블(헤더)이 로컬 출력 포트를 나타내는 패킷에게 전송되거나 버스에 패킷을 전송하여 수행
    + 모든 출력 포트에 패킷이 수신되지만 레이블과 매치되는 포트만 패킷 유지
    + 레이블은 스위치 내에서 버스를 통과하기 위해서만 사용되므로 출력 포트에서 제거
    + 동시에 여러 패킷이 다른 입력 포트에 있는 라우터에 도착하면 한 번에 하나의 패킷만 버스를 통과할 수 있으므로 하나를 제외한 모든 패킷이 대기해야 함
    + 모든 패킷이 하나의 버스를 통해 지나가야 하므로, 라우터 교환 속도는 버스 속도에 의해 제한

  - 상호연결 네트워크를 통한 교환
    + 크로스바 스위치(Crossbar Switch)는 N개의 입력 포트와 N개의 출력 포트에 연결하는 2N 버스로 구성된 상호연결 네트워크
    + 각 수직 버스는 교차점에서 각 수평 버스와 교차하며 스위치 구조 컨트롤러에 의해 언제든지 열거나 닫을 수 있음
    + 패킷이 포트 A에 도착하여 포트 Y로 전달되어야 하는 경우, 스위치 컨트롤러 A와 Y 버스들과 포트 A의 교차로에서 교차점을 닫고, 버스로 패킷 전달하여 Y 버스만 픽업
    + A에서 Y로, B에서 X로 패킷들은 다른 입출력 버스를 사용하므로 B 포트에서 패킷은 동시에 X로 전달될 수 있음
    + 즉, 여러 패킷을 병렬로 전달 가능하며, 출력 포트로 전달되는 패킷을 다른 패킷이 현재 해당되는 출력 포트로 전달되지 않는 한 해당 출력 포트에 도달하는 것을 차단하지 않음
    + 그러나 2개의 서로 다른 입력 포트에서 나오는 2개의 패킷이 동일한 출력 포트로 보내지면, 한 번에 하나의 패킷만 특정 버스에서 전송될 수 있으므로 입력을 기다려야 함
    + 좀 더 정교한 상호연결 네트워크는 다단계 스위치 구조를 통해 각기 다른 입력 포트 패킷이 동일한 출력 포트를 향해 동시에 전달될 수 있도록 여러 단계 스위칭 요소 사용
    
