-----
### IPv6
-----
1. 32비트 IPv4 주소 공간이 인터넷에 접속하는 서브넷과 노드들로 인해 빠른 속도로 고갈
2. 큰 IP 주소 공간이 필요함에 따라 새로운 IP 프로토콜인 IPv6이 개발

-----
### IPv6 데이터그램 포맷
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/cad6722f-9344-4ecd-afb9-98e8aafe87a8">
</div>

1. 확장된 주소 기능
   - IPv6은 IP 주소 크기를 32비트에서 128비트로 확장
   - 또한, 유니캐스트, 멀티캐스트 주소 뿐 아니라 새로운 주소 형태인 애니캐스트 주소(Anycast Address) 도입
     + 애니캐스트 주소로 명시된 데이터그램은 호스트 그룹의 어떤 이에게도 전달 가능 (예) 주어진 문서를 포함한 수많은 미러 사이트 중 가장 근접한 HTTP GET을 보내는데 사용 가능)

2. 간소화된 40바이트 헤더
   - IPv4의 많은 필드가 생략되거나 옵션으로 남겨졌음
   - 40바이트 고정 길이 헤더는 라우터가 IP 데이터그램을 더 빨리처리하게 해줌
   - 새로운 옵션 인코딩은 유연한 옵션 처리를 가능하게 해줌

3. 흐름 레이블링
   - IPv6은 정의하기 어려운 흐름(Flow)을 가지고 있음
   - 예를 들어, 오디오 / 비디오 전송은 흐름으로 처리되지만, 파일 전송 또는 전자메일 같은 예전 애플리케이션 흐름은 더 이상 흐름으로 처리되지 않고 높은 사용자 우선순위를 가지고 전달된 트래픽 또한 흐름처럼 처리될 수 있음

4. 버전
   - 4비트 필드로 IP 버전 번호를 인식
   - 필드값은 6이며, 단순히 필드를 4로 설정한다고하여 IPv4 데이터그램으로 만들 수 있는 것이 아님

5. 트래픽 클래스
   - IPv4의 TOS 필드와 비슷한 의미로 만든 8비트 필드는 흐름 내 SMTP 이메일 같은 애플리케이션 데이터그램보다 VoIP 같은 특정 애플리케이션 데이터그램에 우선순위 부여에 사용

6. 흐름 레이블
   - 20비트 필드는 데이터그램 흐름을 인식하는데 사용

7. 페이로드 길이
   - 16비트값으로, IPv6 데이터그램에서 고정 길이 40바이트 패킷 헤더 뒤 나오는 바이트 길이로, 부호 없는 정수

8. 다음 헤더
   - 데이터그램 내용(데이터 필드)이 전달될 프로토콜을 구분
   - IPv4 헤더의 프로토콜 필드와 동일

9. 홉 제한
    - 라우터가 데이터그램을 전달할 때마다 1씩 감소
    - 홉 제한 수가 0보다 작아지면 라우터는 데이터그램을 버려야 함

10. 데이터와 목적지 주소 : IPv6 128비트 주소
11. 데이터 : IPv6 데이터그램의 페이로드 부분
    - 데이터그램이 목적지에 도착하면 IP 데이터그램에서 페이로드를 제거한 후, 다음 헤더 필드에 명시한 프로토콜에 전달

12. 더 이상 존재하지 않는 필드
    - 단편화 / 재결합
      + 단편화와 재결합을 출발지와 목적지만이 수행
      + 라우터가 받은 IPv6 데이터그램이 너무 커서 출력 링크로 전달할 수 없다면 라우터는 데이터그램을 폐기 후, 패킷이 너무 크다는 ICMP 오류 메세지를 송신자에게 보냄
      + 송신자는 데이터를 IP 데이터그램 크기를 줄여서 다시 보냄
      + 단편화와 재결합은 시간이 오래 걸리므로 라우터에서 이 기능을 삭제하고, 종단 시스템이 하게 함으로 IP 전달 속도 증가

    - 헤더 체크섬
      + 트랜스포트 계층 프로토콜과 데이터 링크 프로토콜은 체크섬을 수행하므로 네트워크 계층 체크섬 기능을 반복되는 것으로 생각하여 생략하도록 함
      + 즉, IP 패킷의 빠른 처리가 주요 관심이 되었음
      + IPv4 헤더는 TTL 필드를 포함하여 IPv4 헤더 체크섬을 모든 라우터마다 수행했는데, 이는 단편화와 재결합과 더불어 비용이 많이 드는 과정이었음

    - 옵션
      + 더 이상 표준 IP 헤더 필드가 아니지만, 완전히 사라진 것은 아님
      + 대신 옵션 필드는 IPv6 헤더에서 다음 헤더 중 하나가 될 수 있음
      + TCP나 UDP 프로토콩 헤더가 IP 패킷에서 다음 헤더가 될 수 있는 것처럼 옵션 필드 역시 동일
      + 옵션 필드가 제거되었으므로 표준에서는 고정 길이 40바이트 IP 헤더를 갖게 됨
