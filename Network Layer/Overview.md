-----
### 네트워크 계층 개요
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/123d1e81-f024-4ec8-a6ef-7f9a518077d4">
</div>

1. H1과 H2 경로 상 여러 라우터와 두 호스트 H1와 H2로 이루어진 간단한 네트워크
   - H1이 H2에게 정보를 보낸다고 가정하고, 호스트와 중계 라우터에서 네트워크 계층의 역할은 다음과 같음
     + H1 네트워크 계층은 H1의 트랜스포트 게층으로 세그먼트를 얻어 각 세그먼트를 데이터그램으로 캡슐화 (네트워크 계층 패킷), 인접한 라우터 R1에게 데이터그램을 보냄
     + 수신 호스트 H2의 네트워크 계층은 트랜스포트 계층 세그먼트를 추출하여 H2의 트랜스포트 계층까지 전달
   - 즉, 각 라우터의 데이터 평면 역할은 입력 링크에서 출력 링크로 데이터그램을 전달하는 것
   - 네트워크 제어 평면의 근본적인 역할은 데이터그램이 출발지 호스트에서 목적지 호스트까지 잘 전달되게 로컬 포워딩, 라우터별 포워딩을 대응시키는 것
   - 라우터는 잘린 프로토콜 스택을 가지며, 트랜스포트 계층과 애플리케이션 계층을 지원하지 않으므로 프로토콜 스택에서 네트워크 계층의 상위 계층은 존재하지 않음

2. 💡포워딩과 라우팅 : 데이터 평면과 제어 평면
   - 네트워크 계층의 근본적인 역할은 송신 호스트에서 수신 호스트로 패킷을 전달하는 것으로 네트워크 계층의 중요한 기능 두 가지 존재
   - 포워딩(전달)
     + 패킷이 라우터의 입력 링크에 도달했을 때, 라우터는 그 패킷을 적절한 출력 링크로 이동시켜야 함
     + 예를 들어, 호스트 H1로부터 패킷이 라우터 R1에 도착했을 때, 라우터 R1은 H2로 가는 경로상에 있는 다음 라우터로 전달되어야 함
     + 포워딩에서 예외적으로 한 기능은 데이터 평면에서 실행되는데, 패킷이 라우터에서 나갈 때 막힐 수도 있고(패킷이 악의가 있는 호스트로부터 보내지거나 금지된 목적지 호스트로 가고자할 때), 또는 복제되어 여러 링크로 전송될 수 있음

   - 라우팅
     + 송신자가 수신자에게 패킷을 전송할 때 네트워크 계층은 패킷 경로를 결정해야 함
     + 경로를 계산하는 알고리즘을 라우팅 알고리즘(Routing Algorithm)이라 함
     + H1에서 H2까지 패킷 전송 라우팅은 네트워크 제어 평면에서 발생

3. 포워딩(Forwarding) : 매우 짧은 시간(보통 몇 나노초) 단위를 갖기에, 대표적으로 하드웨어에서 실행
4. 라우팅(Routing) : 네트워크 전반에 걸쳐 출발지에서 목적지까지 데이터그램의 종단 간 경로를 결정하는 것으로, 더 긴 시간(보통 초) 단위를 갖기에 소프트웨어에서 실행
5. 포워딩 테이블(Forwarding Table) : 네트워크 라우터에서 필수 불가결한 요소
<div align="center">
<img src="https://github.com/user-attachments/assets/ba15950f-db64-4118-8441-7b3d37f6240">
</div>

   - 라우터는 도착하는 패킷 헤더의 필드값을 조사하여 패킷을 전달
   - 이 값을 라우터의 포워딩 테이블의 내부 색인으로 사용하며, 포워딩 테이블 엔트리에 저장되어 있는 헤더의 값은 해당 패킷이 전달되어야 할 라우터의 외부 링크 인터페이스를 나타냄
   - 네트워크 게층 프로토콜에 따라, 헤더의 값은 패킷의 목적지 주소 또는 패킷이 속한 연결의 지시일 수 있음
   - 예를 들어, 헤더값이 0110인 패킷이 라우터에 도차하면, 라우터는 자신의 포워딩 테이블읖 보고 패킷에 대한 출력 링크 인터페이스인 2를 결정하고, 라우터는 내부적으로 패킷을 인터페이스 2로 전달

6. 제어 평면 : 전통적인 접근 방법
   - 라우팅 알고리즘은 라우터 포워딩 테이블의 내용을 결정
     + 라우팅 알고리즘은 각 모든 라우터에서 실행되며, 라우터는 포워딩과 라우팅 기능을 모두 갖고 있어야 함
     + 한 라우터의 라우팅 알고리즘 기능은 다른 라우터의 라우터 알고리즘과 소통하며 포워딩 테이블의 값을 계산
     + 라우팅 프로토콜에 따라 라우팅 정보에 포함된 라우팅 메세지를 교환하며 이루어짐

7. 제어 평면 : SDN 접근 방법
<div align="center">
<img src="https://github.com/user-attachments/assets/bab011d4-aa68-4d4e-8e27-077d532265c6">
</div>

   - 물리적으로 분리된(라우터로부터) 원격 컨트롤러 컴퓨터와 각 라우터에 의해 사용될 포워딩 테이블을 분배하는 다른 접근법
   - 제어 평면 라우팅 기능이 물리적 라우터와는 다름(원격 제어가 포워딩 테이블을 계산 및 배분하는 동안 라우팅 기기는 포워딩만 수행)
   - 원격 컨트롤러가 높은 신뢰성과 중복성을 갖춘 원격 데이터에 설치될 수 있으며, ISP 혹은 다른 제3자에 의해 관리될 수 있음
   - 포워딩 테이블과 그 밖의 라우팅 정보를 포함한 메세지를 교환함으로써 소통 가능
   - 제어 평면적 접근 방법은 SDN(Software Defined Networking)의 중심 : 네트워크가 소프트웨어적으로 정의되었을 때, 포워딩 테이블을 계산하는 컨트롤러는 라우터와 상호작용하며 소프트웨어에서 실행

8. 네트워크 서비스 모댈
   - 네트워크 계층이 제공하는 서비스 모델은 송수신 호스트 간 패킷 전송 특성을 결정
   - 보장된 전달 : 패킷이 출발지 호스트에서부터 목적지 호스트가지 도착하는 것 보장
   - 지연 제한 이내 보장된 전달 : 패킷의 전달을 보장할 뿐만 아니라 호스트 간 특정 지연 제한(예) 100ms 이내) 안에 전달
   - 순서화 패킷 전달 : 패킷이 목적지에 송신된 순서대로 도착하는 것을 보장
   - 최소 대역폭 보장 : 송신과 수신 호스트 사이에 특정 비트율(예) 1 Mbps)의 전송 링크를 에뮬레이트하므로, 송신 호스트가 비트들(패킷의 구성물)을 특정한 비트율 이하로 전송하는 한, 모든 패킷이 목적지 호스트까지 전달
   - 보안 서비스 : 네트워크 계층 모든 데이터그램을 출발지 호스트에서는 암호화, 목적지 호스트에서는 복호화할 수 있게하여 트랜스포트 게층의 모든 세그먼트에 대해 기밀성 유지

9. 인터넷 네트워크 계층은 최선형 서비스(Best-Effort Service)라고 알려진 서비스 제공
    - 패킷을 보내는 순서대로 수신됨을 보장할 수 없을 뿐만 아니라, 목적지까지의 전송 자체도 보장 할 수 없음
    - 종단 시스템 간 지연 또한 보장되지 않으며, 보장된 최소 대역폭 또한 없음

10. 💡 용어 정리 - 포워딩, 스위칭
    - 패킷 스위치 : 패킷 헤더 내부 필드값에 따라 입력 링크 인터페이스에서 출력 링크 인터페이스로 패킷을 전달하는 일반적인 패킷 교환 장비
    - 링크 계층 스위치 : 일부 패킷 스위치로서, 링크 계층 프레임 필드값에 근거하여 포워딩 결정
      + 스위치는 링크 계층(2계층) 장치
     - 라우터 : 패킷 스위치로서, 네트워크 계층 필드값에 근거하여 포워딩 결정
