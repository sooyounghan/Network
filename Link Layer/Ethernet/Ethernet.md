-----
### 이더넷
-----
1. 최초의 이더넷 랜은 밥 멧칼프와 데이비드 보그스가 1970년대 중반에 발명 : 노드를 연결하기 위해 동축(Coaxial) 버스를 사용했음
2. 이더넷의 버스 토폴리지는 1980년대와 1990년대 중반에 걸쳐 실제 지속
   - 버스 토폴리지의 이더넷은 브로드캐스트 랜으로, 전송되는 모든 프레임은 버스에 연결된 모든 어댑터를 거치며 이들에 의해 처리
3. 1990년대 후반에 대부분 회사와 대학은 랜을 허브 기반의 스타 토폴리지를 사용하는 이더넷으로 대체
   - 호스트와 라우터는 꼬임쌍선을 사용해 허브에 직접 연결
   - 허브(Hub) : 프레임이 아닌 각 비트에 대한 처리를 하는 물리 계층으로, 0이나 1을 나타내는 비트가 인터페이스에 도착하면, 허브는 이 비트를 재생하고 에너지 세기를 증가시킨 후 다른 모든 인터페이스로 전송
     + 허브 기반의 스타 토폴리지를 갖는 이더넷 또한 브로드캐스트 랜
     + 즉, 허브가 한 인터페이스로 비트를 수신하면, 그 비트의 복사본을 다른 모든 인터페이스로 전송
     + 특히, 허브가 동시에 다른 두 인터페이스로부터 프레임을 수신하면, 충돌이 발생하기 때문에 프레임을 생성한 노드들은 이들 프레임을 재전송해야 함

4. 2000년대 초반에 이더넷은 중앙 허브가 스위치(Switch)로 대체

-----
### 이더넷 프레임 구조
-----
1. IP 데이터그램을 같은 랜 상에 있는 한 호스트에서 다른 호스트로 전송한다고 가정 (이더넷 프레임의 페이로드가 IP 데이터그램이지만, 다른 네트워크 계층 패킷도 이더넷 프레임에 포함되어 전달될 수 있음)
   - 송신 어댑터인 어댑터 A는 MAC 주소 ```AA-AA-AA-AA-AA-AA```를 가지며, 수신 어댑터인 어댑터 B는 MAC 주소 ```BB-BB-BB-BB-BB-BB```를 가짐
   - 송신 어댑터는 IP 데이터 그램을 이더넷 프레임에 캡슐화하고, 그 프레임을 물리 계층에 전달하며, 수신 어댑터는 그 프레임을 물리 계층으로부터 받아서 IP 데이터그램을 추출한 후 그 IP 데이터그램을 네트워크 계층으로 전달

2. 이더넷 프레임의 6개 필드
<div align="center">
<img src="https://github.com/user-attachments/assets/7651fb88-b269-45cd-8f91-745101883a1b">
</div>

  - 데이터 필드(46 ~ 1500 바이트) : IP 데이터그램 운반
    + 이더넷의 최대 전송 단위(MTU)는 1500바이트
    + 만일 IP 데이터그램이 1500바이트를 초과하면 호스트가 이 데이터그램을 단편화 해야하는 것을 의미하며, 데이터 필드의 최소 크기는 46바이트로, IP 데이터그램이 46바이트보다 작으면 데이터 필드를 채워서 46바이트로 만들어야 함
    + 네트워크 계층으로 전달되는 데이터에 IP 데이터그램 뿐만 아니라 임의로 채운 것도 포함
    + 네트워크 계층은 임의로 채운 부분을 제거하기 위해 IP 데이터그램 헤더에 있는 길이 필드 사용

  - 목적지 주소(6바이트) : 목적지 어댑터의 MAC 주소를 포함
    + 어댑터 B는 목적지 주소가 ```BB-BB-BB-BB-BB-BB```이거나 MAC 브로드캐스트 주소인 프레임을 수신하면 프레임의 데이터 필드 내용을 네트워크 계층으로 전달하며, 그 외 MAC 주소를 가진 프레임은 폐기

  - 출발지 주소(6바이트) : 프레임을 랜으로 전송하는 어댑터의 MAC 주소
  - 타입 필드(2바이트) : 이더넷으로 하여금 네트워크 계층 프로토콜을 다중화하도록 허용
    + 호스트가 IP 이외의 네트워크 계층 프로토콜을 사용할 수 있으며, 실제로, 호스트는 다수의 네트워크 계층 프로토콜이 지원 가능
    + 그러므로 이더넷 프레임이 어댑터 B에 도착하면 어댑터 B는 어떤 네트워크 계층 프로토콜로 데이터 필드 내용을 전달(역다중화) 할지 구분할 필요가 있음
    + IP와 다른 데이터링크 계층 프로토콜은 자신만의 표준 타입 번호를 가지고 있으며, ARP 프로토콜은 자신만의 타입 번호를 가지고 있음
    + 수신 프레임이 ARP 패킷을 포함하고 있으면(즉, 16진수 0806 타입 필드를 갖고 있으면), ARP 패킷은 ARP 프로토콜로 역다중화
    + 즉, 이러한 필드 모두 한 계층에서 프로토콜을 상위 계층 프로토콜로 연계시키는 역할

  - 순환 중복 검사(CRC, 4바이트) : 수신 어댑터인 어댑터 B로 하여금 프레임 오류가 생겼는지 검출할 수 있게 하는 것
  - 프리앰블(8바이트) : 이더넷 프레임은 8바이트의 프리앰블(Preamble) 필드로 시작
    + 첫 7바이트는 10101010의 값을 가지며, 마지박 바이트는 10101011
    + 프리앰블의 첫 7바이트는 수신 어댑터를 깨우고, 수신자 클록을 송신자 클록과 동기화하는 역할
    + 어댑터 A는 이더넷 랜 종류에 따라 10 Mbps, 100 Mbps, 1 Gbps 속도로 프레임 전송하려 하지만, 어댑터 A는 프레임을 목적지 속도에 맞춰 정확하게 전송 불가하므로, 즉, 항상 목표 속도에서 벗어나는 정도를 다른 어댑터가 알지 못하므로, 수신 어댑터는 프리앰블 첫 7바이트에 있는 있는 비트들에게 맞춤으로써 어댑터 A의 클록에게 맞출 수 있음
    + 프리앰블의 8번째 바이트의 마지막 두 비트(처음 연속으로 오는 1)는 어댑터 B로 하여금 중요한 것이 오고 있음을 알림

3. 이더넷 기술은 네트워크 계층에게 비연결형 서비스를 제공
   - 즉, 어댑터 A가 데이터그램을 어댑터 B에게 전송할 때, 어댑터 A는 먼저 어댑터 B와 핸드쉐이킹 하지 않고, 이더넷 프레임에 데이터그램을 캡슐화해서 그 프레임을 랜으로 전송
   - 2계층 비연결형 서비스는 IP 3계층 데이터그램 서비스 및 UDP 4계층 비연결형 서비스와 유사

4. 이더넷 기술은 네트워크 계층에게 비신뢰적 서비스 제공
   - 어댑터 B가 어댑터 A로부터 프레임을 수신했을 때, 어댑터 B는 CRC를 통해 프레임을 검사하지만, 프레임이 CRC 검사를 통과하더라도 응답을 보내지 않음
   - 프렝미이 CRC 검사에서 실패해도 부정 확인 응답을 보내지 않음
   - 프레임이 CRC 검사에서 실패하면, 어댑터 B는 단순히 그 프레임을 폐기하며, 어댑터 A는 전송된 프레임이 어댑터 B에 도착해서 CRC 검사를 통과했는지 알 수 없음
   - 이러한 비신뢰적 전송은 이더넷을 단순하고 저렴하게 만들게 하지만, 네트워크 계층으로 전달되는 데아터그램 중 손실된 데이터그램이 있을 수 있음
     + 애플리케이션이 UDP를 사용하면, 실제 호스트 B의 애플리케이션은 데이터 손실로 인해 지장을 받음
     + 애플리케이션이 TCP를 사용하면, 호스트 B의 TCP가 폐기된 프레임에 포함되어 있던 데이터에 대한 확인 메세지를 보내지 않음으로써 호스트 A에 있는 TCP로 하여금 재전송을 할 것
     + TCP가 데이터를 재전송하면, 그 데이터는 결국 자신을 폐기했던 이더넷 어댑터로 돌아옴
   - 이더넷은 전송하고 있는 데이터그램이 이미 한 번 전송되었던 데이터를 포함하고 있는지 또는 데이터그램이 새로운 데이터를 가진 새로운 데이터그램인지 구분할 수 없음에도 불구하고, 데이터를 재전송

-----
### 이더넷 기술
-----
1. 실제로 이더넷은 다양한 종류가 있으며, 10BASE-T, 10BASE-2, 10BASE-T, 10000BASE-LX, 10GBASE-T, 40GBASE-T와 같은 약어로 표현
2. 이더넷 기술은 수년에 걸쳐 IEEE 802.3 CSMA/CD(이더넷) 워킹그룹에 의해 표준화
   - 첫 부분 : 표준 속도로 10, 100, 1000, 10G, 40G는 각 10메가비트(초당), 100메가비트, 기가비트, 10기가비트, 40기가비트 이더넷을 뜻함
   - BASE : 베이스밴드 이더넷을 나타내며, 물리 매체가 이더넷 트래픽만 전달함을 뜻함 (거의 모든 802.3 표준은 베이스밴드 이더넷)
   - 마지막 부분 : 물리 매체를 뜻함
     + 💡 이더넷은 링크 계층과 물리 계층 모두에 대한 명세로, 동축 케이블 / 동선 / 광섬유와 같은 다양한 물리 매체 상으로 전달 (T : 꼬임상선)

3. 역사적으로 이더넷은 초기에는 동축케이블 일부로 여겨짐
   - 초기에 10BASE-2와 10BASE-5 표준은 각각 길이가 500m로 한정된 두 종류의 동축케이블에 대한 10 Mbps 이더넷에 관한 것
     + 리피터(Repeater, 입력단에서 신호를 수신해서 출력단으로 재생해주는 물리 장치)를 사용함으로써 길이 확장 가능
     + 동축케이블은 이더넷을 브로드캐스트 매체로 간주하는 것과 일치
     + 즉, 한 인터페이스에서 전송된 모든 프레임이 다른 모든 인터페이스에 의해 수신되고, 이더넷의 CSMA/CD 프로토콜이 다중 접속 문제를 해결해줌
     + 노드를 단순히 케이블에 연결하면 근거리 네트워크가 됨

   - 이더넷은 수년에 걸쳐, 오늘날의 이더넷은 동축 케이블을 사용하는 초기 버스 토폴리지 설계와 상당히 다름
     + 노드가 꼬임쌍선이나 광섬유 케이블로 만들어진 점대점 세그먼트를 통해 스위치에 연결

4. 1990년대 중반 이더넷은 10 Mbps보다 10배 빠른 100 Mbps로 표준화
   - 초기 이더넷 MAC 프로토콜과 프레임 형식은 그대로 유지되었지만 동선(100BASE-T)와 광섬유(100BASE-FX, 100BASE-SX, 100BAES-BX)에 대해 고속의 물리 계층이 정의
   - 100 Mbps 이더넷 표준과 공통 이더넷 MAC 프로토콜 및 프레임 형식
<div align="center">
<img src="https://github.com/user-attachments/assets/9e381993-1900-4fec-bb6a-8f702a905aa1">
</div>

   - 100 Mbps 이더넷은 꼬임쌍의 경우 100m, 광섬유의 경우 수 km로 거리를 제한하며, 다른 건물에 잇는 이더넷 스위치간 연결 허용
   - 기가비트 이더넷은 상당히 성공적이었던 위 표준을 확장한 것으로, 실제(raw) 데이터율이 40,000 Mbps인 40기가비트 이더넷은 널리 사용되는 이더넷 장비와 완전히 호환 가능

5. IEEE 802.3z (기가비트 이더넷) 표준
   - 표준 이더넷 프레임 형식을 사용하며, 10BASE-T / 100BASE-T 기술과 하위 호환성을 가지므로, 현재 구축되어있는 이더넷 장비와 쉽게 통합 가능
   - 공유되는 브로드캐스트 채널뿐만 아니라 점대점 링크도 허용 (브로드캐스트 채널의 경우에는 허브를 사용, 점대점 링크에서는 스위치를 사용 / 허브는 버퍼를 갖는 분배(Buffered Distributor)라고 함)
   - 공유되는 브로드캐스트 채널에서는 CSMA/CD를 사용 (적절한 효율을 얻기 위해 노드 사이 최대 거리를 상당히 제한해야함)
   - 점대점 채널에서는 양방향으로 40Gbps로 전이중 동작이 가능

6. 기가비트 이더넷은 원래 광섬유에서 동작하지만, 카테고리 5 UTP 케이블 사용 가능
7. 버스 토폴리지와 허브 기반 스타 토폴리지를 사용하던 이더넷 표준은 노드들이 동시에 전송하면 프레임 충돌이 발생하는 브로드캐스트 링크
   - 이 충돌을 막기 위해 이더넷 표준에 CSMA/CD 프로토콜을 포함하였으며, 특히 작은 영역에 설치된 유선 브로드캐스트 랜에 효과적
   - 현재 많이 사용되는 이더넷이 저장-후-전달 패킷 교환을 하는 스위치 기반의 스타 토폴리지이지만 MAC 프로토콜 사용 이유 : 스위치는 전송을 조절하며 동일 인터페이스로 하나 이상의 프레임을 절대 전달하지 않고, 현대 스위치는 전이중이며, 스위치와 노드는 간섭 없이 동시에 서로에게 프레임을 보낼 수 있음
   - 즉, 스위치 기반 이더넷 랜에는 충돌이 없으며, 따라서 MAC 프로토콜이 필요 없음
