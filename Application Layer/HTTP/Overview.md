-----
### HTTP 개요
-----
1. 웹 애플리케이션 계층 프로토콜인 HTTP (HyperText Transfer Protocol)는 웹의 중심
   - RFC 1945, RFC 7230, RFC 7540에 정의
   - 두 가지 프로그램으로 구현 (클라이언트 프로그램과 서버 프로그램)
   - 각기 다른 종단 시스템에서 수행되는 클라이언트 프로그램과 서버 프로그램은 서로 HTTP 메세지를 교환하여 통신
   - 또한, 메세지의 구조 및 클라이언트와 서버가 메세지를 어떻게 교환하는지에 대해 정의

2. 웹 페이지(Web Page, 문서)는 객체들로 구성
   - 객체(Object)는 단순히 단일 URL로 지정할 수 있는 하나의 파일(HTML 파일, JPEGE 이미지 등)
   - 웹 페이지는 기본 HTML과 여러 참조 객체로 구성
   - 기본 HTML 파일은 페이지 내부의 다른 객체를 그 객체의 URL로 참조
   - 각 URL은 2개의 요소 (객체를 갖고 있는 서버의 호스트 이름과 객체의 경로 이름을 가짐)
   - 예시 (```www.someSchool.edu``` : 호스트 이름, ```/someDepartment/picture.gif``` : 경로 이름)
<div align="center">
<img src="https://github.com/user-attachments/assets/28218d62-193d-45b6-a02e-fbff4e19d4d6">
</div>

   - 웹 브라우저는 HTTP 클라이언트 측을 구현하므로 웹 관점에서 브라우저와 클라이언트 용어 혼용
   - HTTP를 구현하는 웹 서버는 URL로 각 지정할 수 있는 웹 객체를 가짐

3. HTTP는 웹 클라이언트가 웹 서버에게 웹 페이지를 어떻게 요청하는지와 서버가 클라이언트로 어떻게 웹 페이지를 전송하는지 정의
<div align="center">
<img src="https://github.com/user-attachments/assets/35cc6109-61c3-4c5b-b877-3e14a548c3ff">
</div>

   - 사용자가 웹 페이지를 요청할 때, 브라우저는 페이지 내부 객체에 대한 HTTP 요청 메세지를 서버에게 보냄
   - 서버는 요청을 수신하고 객체를 포함하는 HTTP 응답 메세지로 응답

4. HTTP는 TCP를 전송 프로토콜로 사용
   - HTTP 클라이언트는 먼저 서버에 TCP 연결 시작
   - 연결이 이루어지면, 브라우저와 서버 프로세스는 소켓 인터페이스를 통해 TCP로 접속
   - 클라이언트는 HTTP 요청 메세지를 소켓 인터페이스로 보내고, 소켓 인터페이스로부터 HTTP 응답 메세지를 받음
   - HTTP 서버는 소켓 인터페이스로부터 요청 메세지를 받고, 응답 메세지를 소켓 인터페이스로 보냄
   - 중요 : TCP는 HTTP에게 신뢰적인 데이터 서비스를 제공
   - 💡 단, 서버가 클라이언트에게 요청 파일을 보낼 때, 서버는 클라이언트에 관한 어떠한 상태 정보도 저장하지 않는데, HTTP를 비상태 프로토콜(Stateless Protocol)라고 부름

5. HTTP/1.0 : 1990년대 초 등장, HTTP/1.1 : 현재 대부분 사용, HTTP/2 : 새로운 HTTP 버전

-----
### 비지속 연결과 지속 연결
-----
1. HTTP는 비지속 연결과 지속 연결 모두 사용 가능
    - 디폴트 모드로 지속 연결 사용하지만, HTTP 클라이언트와 서버는 비지속 연결 사용 설정 가능

2. 비지속 연결 HTTP
    - 예시) 웹 페이지를 서버에서 클라이언트로 전송하는 단계 (페이지가 기본 HTML 파일과 10개의 JPEG 이미지로 구성되고, 이 11개의 객체가 같은 서버에 있다고 가정) : 기본 HTML 파일 경로 (```http://www.someSchool.edu/someDepartment/home.index```)
       + HTTP 클라이언트는 HTTP 기본 포트 번호 80을 통해 ```www.someSchool.edu``` 서버로 TCP 연결 시도 (TCP 연결과 관련해 클라이언트와 서버에 각 소켓이 있음)
       + HTTP 클라이언트는 설정된 TCP 연결 소켓을 통해 서버로 HTTP 요청 메세지를 보냄 (요청 메세지에 ```/someDepartment/home.index``` 경로 이름 포함)
       + HTTP 서버는 위에서 설정된 연결 소켓을 통해 요청 메세지를 받고, 저장장치로부터 ```/someDepartment/home.index``` 객체를 추출하며, HTTP 응답 메세지에 그 객체를 캡슐화하여 응답 메세지를 소켓을 통해 클라이언트로 보냄
       + HTTP 서버는 TCP에게 TCP 연결을 끓을 것을 요청 (단, 실제로 TCP 클라이언트가 응답 메세지를 올바로 받을 때까지 끊지 않음)
       + HTTP 클라이언트가 응답 메세지를 받으면 TCP 연결이 중단 (메세지는 캡슐화된 객체가 HTML 파일인 것을 나타내며, 클라이언트는 응답 메세지로부터 파일 추출 후, HTML 파일을 조사하여 JPEG 객체에 대한 참조를 찾음)
       + 이후 참조되는 각 JPEG 객체에 대해 위 단계 반복되며, 브라우저는 웹 페이지를 수신하면서, 사용자에게 그 페이지를 보여줌
    - 2개의 다른 브라우저는 웹 페이지를 각 다른 방식으로 해석할 수 있음, 즉  HTTP는 클라이언트가 웹 페이지를 어떻게 해석하는지 관심이 없음 (HTTP 명세서는 클라이언트 HTTP 프로그램과 서버 HTTP 프로그램 사이 통신 프로토콜만 정의)

3. HTTP/1.0은 비지속 연결을 지원 : 각 TCP 연결은 하나의 요청 메세지와 응답 메세지로 전송
    - 사용자가 동시성 정도를 조절할 수 있도록 브라우저 구성 가능 : 브라우저는 여러 개의 TCP 연결을 설정하여 다중 연결 상에서 웹 페이지의 각 다른 원하는 부분 요청 가능 (동시 연결을 사용하면 응답 시간 줄일 수 있으)

4. 클라이언트가 기본 HTML 파일을 요청하고 그 파일이 클라이언트로 수신될 때까지 시간
   - RTT(Round-Trip Time) : 작은 패킷이 클라이언트로부터 서버까지 가고, 다시 되돌아오는데 걸리는 시간
     + RTT는 패킷 전파 지연, 중간 라우터와 스위치에서 패킷 큐잉 지연, 패킷 처리 지연 등 포함
     + 브라우저와 웹 서버 사이에서 TCP 연결을 시도 (3-Way Handshake) (= 클라이언트가 작은 TCP 메세지를 서버로 보내어 서버는 작은 메세지로 응답하고, 마지막으로 다시 클라이언트가 서버에게 응답)
     + 이 때, 처음 두 부분이 경과되면 RTT 시작 : 3-Way Handshake의 처음 두 과정이 끝난 후 클라이언트는 HTTP 메세지를 TCP 연결로 보내면서 핸드쉐이크의 세 번째 부분(응답)을 함께 보냄
     + 요청 메세지가 서버에 도착하면 서버는 HTML 파일을 TCP 연결로 보내는데, 이 때 HTT 요청 / 응답은 또 하나의 RTT를 필요로 함

   - 따라서, 총 응답시간은 대략 2 RTT (HTML 파일을 서버가 전송하는데 걸리는 시간)
  
5. 지속 연결
   - 비지속 연결의 단점
     + 각 요청에 대해 새로운 연결이 생성되고 유지되어야 함 : TCP 버퍼가 할당되어야 하고 TCP 변수들이 클라이언트와 서버 양쪽에 유지해야 함
       * 수 많은 클라이언트 요청을 동시에 서비스하는 웹 서버에게 심각한 부담 제공
     + 각 객체는 2 RTT 필요 (TCP 연결 설정 1 RTT, RTT 객체 주고 받음 : 1 RTT)
   - HTTP/1.1 지속 연결에서 서버는 응답을 보낸 후 TCP 연결을 그대로 유지
     + 같은 클라이언트와 서버 간 이후 요청과 응답은 같은 연결을 보냄
   - 지속 연결은 진행 중인 객체에 대한 요구에 대해 응답을 기다리지 않고 연속해서 만들어질 수 있음 (Pipelining)
   - 일반적으로 HTTP 서버는 일정 기간 (타임아웃 기간) 사용되지 않으면 연결을 닫고, 서버가 연속된 요구를 수신할 때, 서버는 객체를 연속해서 보냄
   - HTTP 디폴트 모드는 파이프라이닝을 이용한 지속 연결을 사용
